<div id="loginBtn"></div>

<script src="{{oauthConfig.authServer}}/sdk"></script>
<script>
    Oauth2Client.initialize({
        clientId: '{{oauthConfig.clientId}}',
        authServer: '{{oauthConfig.authServer}}',
        scope: 'openid profile'
    });

    Oauth2Client.renderButton("loginBtn", {
        onSuccess: async (tokens) => {
            const response = await fetch('/auth/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${tokens.access_token}`
                }
            });

            if (response.ok) {
                window.location.reload();
            } else {
                console.error('Login failed');
            }
        },
        onError: (error) => {
            console.error('Login failed:', error);
        }
    });
</script>

<style>
    #loginBtn button {
        background-color: red;
    }
</style>